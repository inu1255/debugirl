(function(){var cur=document.currentScript,s=cur.previousElementSibling,code=s.textContent,rid=+cur.id,id=cur.getAttribute("eid"),wid=cur.getAttribute("wid");try{var pms=eval(code);pms&&"function"===typeof pms.then?pms.then((function(r){send({rid:rid,wid:wid,data:r})})).catch((function(r){send({rid:rid,wid:wid,err:r})})):send({rid:rid,wid:wid,data:pms})}catch(err){send({rid:rid,wid:wid,err:err})}function send(r){r.err&&Object.keys(r.err).length<1&&(r.err=formatError(r.err)),chrome.runtime.sendMessage(id,r)}function formatError(r){if(r&&"object"===typeof r){if("string"===typeof r.msg)return r.msg;if("string"===typeof r.message)return r.message;if("string"===typeof r.error)return r.error;for(var e in r){var t=r[e];if("string"===typeof t)return t}for(var e in r){t=r[e];if(t&&"object"===typeof t)return formatError(t)}}return r+""}s.remove(),cur.remove()})();